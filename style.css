/* ===== Base ===== */
:root {
  --color-app-bg: #e0e0e0;
  --color-bg: #ffffff;
  --color-text: #333333;
  --color-border: #c7c7c7;
  --color-accent: #cccccc;
  --color-placeholder: #9e9e9e;
  --color-primary: #2e7d32;
  --accent-orange: #ff9800;
  --orange-500: var(--accent-orange);
  --radius-xs: 4px;
  --radius-sm: 6px;
  --radius-md: 8px;
  --radius-lg: 12px;
  --cell-min-h: 72px;
  --sidebar-w: 248px;
  --sidebar-collapsed-w: 72px;
  --sidebar-bg: #1F232A;
  --sidebar-sub-bg: #272D36;
  --neutral-150: #d8d8d8;
  --neutral-200: #bfbfbf;
  --text-strong: var(--color-text);
  --text-weak: #666666;
  --text-primary: var(--color-text);
  --green-500: var(--color-primary);
  --red-600: #c62828;
  --red-400: #e57373;
  --card-shadow: 0 2px 4px rgba(0,0,0,0.1);
  --surface: var(--color-bg);
  --surface-muted: var(--color-app-bg);
  --text-muted: var(--text-weak);
  --control-height: 40px;
  --card-danger-soft: #f8d7da;
  --card-success-soft: #d4edda;
  --card-info-soft: #d1ecf1;
  --os-reloj-color: #183C7A;
  --os-joia-color: #C99700;
  --os-optica-color: #8B0000;
  --kanban-loja: rgba(46, 160, 67, 0.06);
  --kanban-oficina: rgba(255, 159, 10, 0.08);
  --kanban-aguardo: rgba(56, 139, 253, 0.07);
  /* Spacing tokens */
  --space-xs: 4px;
  --space-sm: 8px;
  --space-md: 16px;
  --space-lg: 24px;
  --sidebar-item-height: 44px; /* Ajuste: altura fixa para itens do menu lateral */
  /* White balloon tokens */
  --balloon-bg: var(--surface);
  --balloon-border: var(--color-border);
  --balloon-radius: var(--radius-md);
  --balloon-shadow: 0 1px 2px rgba(0,0,0,0.08);
  --balloon-padding: var(--space-md);
  --balloon-gap: var(--space-md);
}
html.theme-dark {
  --color-app-bg: #121212;
  --color-bg: #1e1e1e;
  --color-text: #f5f5f5;
  --color-border: #333333;
  --color-accent: #cccccc;
  --color-primary: #66bb6a;
  --sidebar-bg: #151922;
  --sidebar-sub-bg: #1f2530;
  --neutral-150: #2a2a2a;
  --neutral-200: #333333;
  --text-strong: var(--color-text);
  --text-weak: #aaaaaa;
  --text-primary: var(--color-text);
  --green-500: var(--color-primary);
  --red-600: #c62828;
  --red-400: #e57373;
  --orange-500: var(--accent-orange);
  --kanban-loja: rgba(46, 160, 67, 0.06);
  --kanban-oficina: rgba(255, 159, 10, 0.08);
  --kanban-aguardo: rgba(56, 139, 253, 0.07);
}
body {
  margin: 0;
  font-family: Arial, Helvetica, sans-serif;
  background: var(--color-app-bg);
  color: var(--color-text);
  display: flex;
}
a { color: inherit; text-decoration: none; }
:focus { outline: none; box-shadow: 0 0 0 2px var(--color-primary); }

/* ===== Layout ===== */
.main { flex:1; display:flex; flex-direction:column; }
.sidebar {
  width: var(--sidebar-collapsed-w);
  flex: 0 0 var(--sidebar-collapsed-w);
  position: sticky;
  top: 0;
  align-self: stretch;
  background: var(--sidebar-bg);
  border-right: none;
  border-radius: 0;
  display: flex;
  flex-direction: column;
  height: 100vh;
  overflow:hidden;
  color:#ccc;
  transition: width 0.24s ease;
}
.sidebar-header { /* Ajuste: cabeçalho independente para o usuário */
  flex: 0 0 auto;
  padding: clamp(16px, 3vw, 20px) clamp(12px, 2.4vw, 18px) clamp(8px, 2vw, 12px);
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  gap: clamp(10px, 2vw, 14px);
  min-height: 132px;
  box-sizing: border-box;
  width: 100%;
  overflow: hidden;
}
.sidebar-nav { /* Ajuste: container próprio para a lista de navegação */
  flex: 1 1 auto;
  display: flex;
  flex-direction: column;
  overflow-y: auto;
  padding: 8px 0 16px;
}
.sidebar-nav::-webkit-scrollbar {
  width: 6px;
  height: 6px;
}
.sidebar-nav::-webkit-scrollbar-thumb {
  background: rgba(255, 255, 255, 0.12);
  border-radius: 999px;
}
.sidebar.is-expanded {
  width: var(--sidebar-w);
  flex: 0 0 var(--sidebar-w);
}
.sidebar-nav ul { /* Ajuste: lista com espaçamento consistente */
  list-style: none;
  padding: 0;
  margin: 0;
  width: 100%;
  display: flex;
  flex-direction: column;
  gap: 8px;
}
.brand-tile {
  height: 80px;
  margin: 16px;
  border-radius: var(--radius-lg);
  display: flex;
  align-items: center;
  justify-content: center;
  font-weight: 800;
  font-size: 1.25rem;
  background: var(--neutral-200);
  box-shadow: var(--card-shadow);
  color:#960018;
  gap: 8px;
  flex-direction: column;
}
.brand-divider {
  width: 60%;
  height: 1px;
  background: var(--color-border);
  opacity: 0.6;
  margin: clamp(4px, 1vw, 8px) auto 0;
  border-radius: var(--radius-xs);
  transition: opacity 0.2s ease;
}
.sidebar:not(.is-expanded) .brand-divider {
  opacity: 0;
}
.nav-item {
  min-height: var(--sidebar-item-height);
  height: var(--sidebar-item-height); /* Ajuste: altura estável para ícones/texto */
  line-height: var(--sidebar-item-height);
  display: flex;
  align-items: center;
  gap: 10px;
  padding: 0 16px 0 18px;
  justify-content: flex-start;
  border-radius: var(--radius-md);
  cursor: pointer;
  position: relative;
  color: #ccc;
  border-left: none;
  margin: 0 16px;
  transition: background 0.2s ease, color 0.2s ease;
  box-sizing: border-box;
}
.nav-item .icon {
  width: 28px;
  height: var(--sidebar-item-height);
  display: flex;
  align-items: center;
  justify-content: center;
  flex-shrink: 0;
  line-height: 0;
}
.nav-item .icon svg { width:100%; height:100%; }
.nav-item .label,
.nav-subitem .label {
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
  display: inline-block;
  transition: transform 0.2s ease;
  transform-origin: left center;
  font-size: 0.9rem;
  line-height: 1.2;
}
.nav-item .label { flex: 1 1 auto; }
.sidebar:not(.is-expanded) .nav-item,
.sidebar:not(.is-expanded) .nav-subitem {
  margin-inline: 12px;
  padding-left: 18px;
  padding-right: 18px;
}
.sidebar:not(.is-expanded) .nav-item {
  justify-content: center;
  gap: 0;
}
.sidebar:not(.is-expanded) .nav-item .label,
.sidebar:not(.is-expanded) .nav-subitem .label,
.sidebar:not(.is-expanded) .nav-item .submenu-caret {
  opacity: 0;
  visibility: hidden;
  width: 0;
  transform: none;
}
.sidebar:not(.is-expanded) .nav-item .label,
.sidebar:not(.is-expanded) .nav-item .submenu-caret {
  flex: 0 0 auto;
}
.sidebar.is-expanded .nav-item,
.sidebar.is-expanded .nav-subitem {
  justify-content: flex-start;
  padding-left: 18px;
  padding-right: 16px;
  margin-inline: 16px;
}
.sidebar:not(.is-expanded) .nav-submenu {
  max-height: 0;
  overflow: hidden;
  padding: 0;
}
.sidebar .nav-submenu {
  transition: max-height 0.2s ease;
}
.sidebar.is-expanded .nav-group.is-expanded .nav-submenu {
  max-height: 400px;
}
.nav-item.is-active {
  background: #2A2F37;
  color: #fff;
  font-weight: 600;
}
.nav-item:hover { background: #2A2F37; }
.nav-item:focus,
.nav-subitem:focus {
  outline: none;
  box-shadow: 0 0 0 2px var(--color-primary);
}
.nav-item:hover .label,
.nav-item:focus-visible .label,
.nav-subitem:hover .label,
.nav-subitem:focus-visible .label {
  transform: scale(1.05);
}
.nav-item.has-submenu { position: relative; }
.nav-item.has-submenu .submenu-caret {
  margin-left: auto;
  display: inline-flex;
  align-items: center;
  flex: 0 0 auto;
  font-size: 0.75rem;
  transform: rotate(0deg);
  transition: transform 0.2s ease;
}
.nav-item.has-submenu.is-expanded .submenu-caret { transform: rotate(90deg); }
.nav-subitem {
  display: flex;
  align-items: center;
  gap: 8px;
  padding: 0 16px 0 56px;
  min-height: var(--sidebar-item-height);
  height: var(--sidebar-item-height);
  line-height: var(--sidebar-item-height);
  color: #ccc;
  cursor: pointer;
  border-left: none;
  transition: background 0.2s ease, color 0.2s ease;
  box-sizing: border-box;
}
.nav-subitem.is-active {
  color: #fff;
  font-weight: 600;
}
.nav-subitem:hover { background: rgba(255,255,255,0.05); }
.topbar {
  position: sticky;
  top: 0;
  left: auto;
  right: auto;
  height: 52px;
  background: #2A2F37;
  border-bottom: 1px solid #1F232A;
  display: flex;
  align-items: center;
  justify-content: space-between;
  padding: 0 0.75rem;
  z-index: 10;
  border-radius: 0;
  color: #fff;
}
.topbar h1 {
  font-size: 1.125rem;
}
.topbar select {
  height: 34px;
  font-size: 0.9rem;
}
.topbar .actions { display: flex; gap: 0.5rem; align-items: center; }

body.modal-open { overflow:hidden; }
body.modal-open .topbar { pointer-events:none; filter:grayscale(1) opacity(.5); }
.content {
  margin-left: 0;
  padding: 1rem;
  flex:1;
}

.sidebar:not(.is-expanded) #profileBadge {
  gap: 0;
  padding: 6px;
  background: linear-gradient(135deg, rgba(255,255,255,0.08), rgba(0,0,0,0.15));
}
.sidebar:not(.is-expanded) #profileBadge.profile-admin {
  background: linear-gradient(135deg, rgba(46,125,50,0.35), rgba(13,71,161,0.15));
}
.sidebar:not(.is-expanded) #profileBadge.profile-other {
  background: linear-gradient(135deg, rgba(255,152,0,0.38), rgba(183,28,28,0.18));
}
.sidebar:not(.is-expanded) #profileBadge .profile-name {
  display: none;
}
.sidebar:not(.is-expanded) #profileBadge .profile-pic {
  width: 44px;
  height: 44px;
  border-radius: 50%;
  border: 2px solid rgba(255,255,255,0.35);
}
.sidebar:not(.is-expanded) .brand-tile {
  width: 48px;
  height: 48px;
  margin: 16px auto 12px;
  border-radius: 50%;
  padding: 0;
  background: #2A2F37;
  box-shadow: inset 0 0 0 1px rgba(255,255,255,0.08);
}

.sidebar:not(.is-expanded) .nav-item.has-submenu::after {
  display: none;
}

/* ===== Components ===== */
.btn {
  padding: 0.5rem 1rem;
  border: none;
  cursor: pointer;
  border-radius: var(--radius-lg);
}
.btn-primary {
  background: var(--color-primary);
  color: #fff;
}
.btn-primary:hover { filter:brightness(0.9); }
.btn-danger {
  background: #c62828;
  color: #fff;
}
.btn-primary, .btn-edit, .btn-danger {
  font-size: 1rem;
  padding: 0.6rem 1.2rem;
  border-radius: var(--radius-lg);
}
/* Info grid */
.info-grid { display:grid; grid-template-columns:3fr 9fr; column-gap:12px; row-gap:8px; align-items:start; }
.info-label { color:var(--text-weak); font-weight:600; white-space:nowrap; }
.info-value { color:var(--text-primary); min-width:0; }
.info-value > * { overflow:hidden; text-overflow:ellipsis; }
@media (max-width:768px){ .info-grid { grid-template-columns:1fr; } }
input, select, textarea, button {
  border-radius: var(--radius-lg);
  font: inherit;
}
input::placeholder, textarea::placeholder {
  font: inherit;
  color: var(--color-placeholder);
}
select option { color: var(--color-text); background: var(--color-bg); }

#profileSelect {
  height: var(--control-height);
  min-width: 220px;
  max-width: 260px;
  padding: 0 0.5rem;
  border: 1px solid var(--color-border);
  border-radius: var(--radius-lg);
  outline: none;
}

#profileSelect:focus {
  outline: none;
}

/* ===== Form controls ===== */
.form-field { display:flex; flex-direction:column; gap:0.25rem; margin-bottom:0.75rem; }
.form-field label { font-weight:500; }
.form-field .field-label { font-weight:500; display:block; }
.text-input,
.masked-input,
.date-input,
.select,
.textarea {
  min-height:36px;
  padding:0 0.75rem;
  border:1px solid var(--color-border);
  border-radius:var(--radius-sm);
  background:var(--color-bg);
  color:var(--color-text);
}
.textarea { padding:0.5rem 0.75rem; resize:vertical; }
.text-input:focus,
.masked-input:focus,
.date-input:focus,
.select:focus,
.textarea:focus {
  outline:none;
  border:2px solid var(--color-primary);
  box-shadow:0 0 0 2px rgba(46,125,50,0.2);
}
.form-field[aria-invalid="true"] .text-input,
.form-field[aria-invalid="true"] .masked-input,
.form-field[aria-invalid="true"] .date-input,
.form-field[aria-invalid="true"] .select,
.form-field[aria-invalid="true"] .textarea {
  border-color:#c62828;
}
.form-field .error-message { color:#c62828; font-size:0.875rem; }

.date-input { width:12ch; min-width:12ch; }
input[name="cpf"] { width:14ch; }
input[name="telefone"] { width:18ch; }
.readonly-green{border:2px solid #2e7d32 !important;}
.ui-dropdown { position: relative; }
.ui-dropdown .dropdown-toggle {
  background: var(--color-bg);
  border: 1px solid var(--color-border);
  padding: 0.5rem;
  border-radius: var(--radius-md);
  cursor: pointer;
}
.ui-dropdown .dropdown-menu {
  position: absolute;
  top: 100%; left: 0;
  background: var(--color-bg);
  border: 1px solid var(--color-border);
  list-style: none;
  padding: 0; margin: 0;
  display: none;
  z-index: 20;
}
.ui-dropdown.open .dropdown-menu { display: block; }
.ui-dropdown .dropdown-menu li { padding: 0.5rem 1rem; cursor: pointer; }
.card-grid {
  display: grid;
  grid-template-columns: repeat(12, 1fr);
  grid-auto-rows: minmax(100px, auto);
  gap: 1rem;
}
.card {
  background: var(--color-bg);
  border: none;
  border-radius: var(--radius-sm);
  padding: 1.5rem;
  display: flex;
  flex-direction: column;
  box-shadow: 0 2px 4px rgba(0,0,0,0.05);
}
.card-head { font-weight:600; font-size:1.125rem; margin-bottom:1rem; }
.card-metric { font-size: 1.5rem; margin-bottom: 0.5rem; }
.empty-state { text-align: center; color: var(--color-border); }
.table-area, .kanban-area { margin-top: 2rem; padding: 2rem; border: 2px dashed var(--color-border); }

/* ===== White Balloon Container ===== */
/* Base balloon */
.balloon {
  background: var(--balloon-bg);
  border: 1px solid var(--balloon-border);
  border-radius: var(--balloon-radius);
  box-shadow: var(--balloon-shadow);
  padding: var(--balloon-padding);
  display: flex;
  flex-direction: column;
  gap: var(--balloon-gap);
  overflow-x: hidden;
  height: auto;
  transition: height 0.3s ease;
}

/* Clamp long headings */
.balloon h1,
.balloon h2,
.balloon h3,
.balloon h4,
.balloon h5,
.balloon h6 {
  overflow: hidden;
  text-overflow: ellipsis;
  white-space: nowrap;
}

/* menu-bar variant */
.balloon--menu-bar {
  flex-direction: row;
  align-items: center;
  justify-content: space-between;
  padding: var(--space-sm) var(--space-md);
  gap: var(--space-sm);
}

/* holder variant */
.balloon--holder {
  flex-direction: row;
  flex-wrap: nowrap;
  overflow-x: auto;
}

/* panel variant (default usage) */
.balloon--panel {
  /* currently same as base balloon */
}

/* Focus state for accessibility */
.balloon:focus-within {
  box-shadow: 0 0 0 2px var(--color-primary), var(--balloon-shadow);
}

/* Clients page layout */
.clientes-menu {
  margin-bottom: 1rem;
  display: grid;
  gap: var(--balloon-gap);
  grid-template-columns: repeat(4,1fr);
}
.clientes-menu .mini-card {
  border: 1px solid var(--color-border);
  border-radius: var(--radius-md);
  min-height: 80px;
  display: flex;
  align-items: center;
  justify-content: center;
  color: var(--text-muted);
}
.clientes-menu .mini-card.stats-card{flex-direction:column;gap:4px;color:var(--color-text);}
.clientes-menu .mini-card.clientes-cadastrados{background:rgba(46,125,50,0.15);}
.clientes-menu .stats-title{font-size:0.875rem;}
.clientes-menu .stats-value{font-size:1.5rem;font-weight:700;}

@media (max-width:1199px) {
  .clientes-menu {
    grid-template-columns: repeat(2,1fr);
  }
}
@media (max-width:767px) {
  .clientes-menu {
    grid-template-columns: 1fr;
  }
}

@media (max-width:600px) {
  .balloon {
    padding: var(--space-sm);
    gap: var(--space-sm);
  }
}

/* ===== Ordem de Serviço ===== */
/* OSMenuBar */
.os-menu-bar{display:grid;gap:8px;margin-bottom:1rem;}
.os-search{position:relative;width:100%;max-width:320px;}
.os-search input{width:100%;height:var(--control-height);padding-left:28px;}
.os-search svg{position:absolute;left:8px;top:50%;transform:translateY(-50%);pointer-events:none;}
.os-menu-bar .os-right{display:flex;align-items:center;justify-content:flex-end;gap:8px;}
.os-menu-bar .mini-card{height:56px;}
@media(min-width:1200px){
  .os-menu-bar{grid-template-columns:auto minmax(260px,320px) 1fr;align-items:center;}
  .os-menu-bar .os-right{justify-content:flex-end;}
}
@media(min-width:768px) and (max-width:1199px){
  .os-menu-bar{grid-template-columns:1fr 1fr;}
  #btnNovaOS{grid-column:1;}
  .os-search{grid-column:2;}
  .os-menu-bar .os-right{grid-column:1/ span 2;display:grid;grid-template-columns:1fr 1fr;gap:8px;align-items:center;}
  .os-menu-bar .os-right .os-type-filter{grid-column:1/ span 2;justify-self:start;}
}
@media(max-width:767px){
  .os-menu-bar{grid-template-columns:1fr;}
  .os-menu-bar > *{grid-column:1;}
  .os-menu-bar .os-right{flex-direction:column;align-items:stretch;}
}

/* OSKanbanHolder */
.os-kanban-holder{margin-bottom:1rem;}
.os-kanban{display:grid;grid-template-columns:repeat(3,1fr);gap:1rem;align-items:flex-start;}
@media (max-width:1024px){.os-kanban{grid-template-columns:repeat(2,1fr);}}
@media (max-width:600px){.os-kanban{grid-template-columns:1fr;}}
.os-kanban .kanban-col{border:1px solid var(--color-border);border-radius:var(--radius-lg);min-height:420px;padding:0;display:flex;flex-direction:column;background:#fff;box-shadow:0 1px 2px rgba(0,0,0,0.05);}
.os-kanban .kanban-col .kanban-header{display:flex;align-items:center;font-weight:bold;font-size:1.25rem;padding:0.5rem;border-bottom:1px solid var(--color-border);}
.os-kanban .kanban-col .kanban-header h3{margin:0;font-size:inherit;font-weight:inherit;flex:1;text-align:center;}
.os-kanban .kanban-col .kanban-header .count{display:inline-flex;align-items:center;justify-content:center;background:#fff;color:#000;font-weight:bold;border-radius:50%;width:28px;height:28px;margin-left:auto;}
.os-kanban .kanban-col .cards{flex:1;padding:0.5rem;display:grid;grid-template-columns:1fr;gap:0.5rem;align-content:flex-start;min-height:300px;}
.os-kanban .kanban-col .cards .os-card{margin:0;}
.os-kanban .kanban-col .kanban-footer { border-top:1px solid var(--color-border); padding:0.5rem; display:flex; justify-content:center; align-items:center; gap:0.5rem; font-size:0.875rem; }
.os-kanban .kanban-col .kanban-footer button { background:none; border:none; cursor:pointer; color:var(--color-text); }
.os-kanban .kanban-col .kanban-footer button:disabled { opacity:0.5; cursor:default; }
.os-kanban .kanban-col .kanban-footer .sep{opacity:0.6;}
.os-kanban .kanban-col.col-kanban--loja{background-color:#e8f5e9;}
.os-kanban .kanban-col.col-kanban--oficina{background-color:#fff3e0;}
.os-kanban .kanban-col.col-kanban--aguardo{background-color:#e3f2fd;}
.os-card { border: 1px solid var(--color-border); border-radius: var(--radius-md); margin-bottom: 0.5rem; overflow: hidden; background:#fff; box-shadow:0 1px 2px rgba(0,0,0,0.05); }
.os-card-top { padding:4px 8px; font-weight:bold; color:#fff; display:flex; justify-content:space-between; align-items:center; }
.os-card-title{flex:1; display:flex; flex-direction:column; line-height:1.2; gap:2px;}
.os-card-top .os-code{margin-bottom:0;}
.os-card.reloj { border-color: var(--os-reloj-color); }
.os-card.joia { border-color: var(--os-joia-color); }
.os-card.optica { border-color: var(--os-optica-color); }
.os-card.reloj .os-card-top{ background: var(--os-reloj-color); }
.os-card.joia .os-card-top{ background: var(--os-joia-color); }
.os-card.optica .os-card-top{ background: var(--os-optica-color); }
.os-card-body { padding: 4px 8px; font-size: 0.875rem; }
.os-card.collapsed .os-card-body{display:none;}
.os-card-phone{font-weight:bold;margin-bottom:4px;}
.os-card-dates{margin-top:8px;}
.os-card-dates .previsao{margin-top:4px;font-weight:bold;}
.badge{display:inline-block;padding:2px 4px;border-radius:var(--radius-sm);font-size:0.75rem;}
.os-card .badge{color:#fff;}

.garantia-page{display:flex;flex-direction:column;gap:1rem;max-width:600px;margin:0 auto;}
.garantia-block{background:var(--surface);box-shadow:var(--card-shadow);padding:1rem;border-radius:var(--radius-md);display:flex;flex-direction:column;}
.garantia-block h3{margin-top:0;font-weight:700;}
.garantia-block textarea{width:100%;min-height:120px;}
.garantia-block button{align-self:flex-start;margin-top:0.5rem;}
.os-card.reloj .badge{background: var(--os-reloj-color);}
.os-card.joia .badge{background: var(--os-joia-color);}
.os-card.optica .badge{background: var(--os-optica-color);}
.os-card-actions { display:flex; gap:4px; }
.os-card-actions .pin-group{display:flex;flex-direction:column;align-items:center;gap:2px;}
.os-card-actions .btn-os-toggle{padding:0 2px;font-size:12px;line-height:12px;}
.os-card-actions .os-action,
.os-completed .os-action{width:36px;height:36px;display:flex;align-items:center;justify-content:center;border:none;background:none;cursor:pointer;border-radius:var(--radius-md);}
.os-card-actions .os-action:focus,
.os-completed .os-action:focus{outline:2px solid var(--color-primary);}
.os-card-actions .os-action:hover,
.os-completed .os-action:hover{background:var(--surface-muted);}
.os-card-actions .btn-os-imprimir,
.os-completed .btn-os-imprimir{color:#607d8b;}
.os-card-actions .btn-os-editar{color:#fb8c00;}
.os-card-actions .btn-os-excluir{color:#e53935;}
.os-card-actions .btn-os-pin{width:16px;height:16px;border-radius:50%;padding:0;}
.os-card-actions .btn-os-pin.pin-blue{background:#1e88e5;}
.os-card-actions .btn-os-pin.pin-green{background:#43a047;}
.os-card-actions .btn-os-pin.pin-orange{background:#ff9800;}
.os-kanban .kanban-col.drag-over { outline:2px dashed var(--os-reloj-color); }
.os-type-filter{display:flex;gap:8px;border:none;}
.os-type-filter .filter-btn{padding:0.5rem 1rem;border:1px solid var(--color-border);border-radius:var(--radius-sm);background:var(--surface);cursor:pointer;}
.os-type-filter .filter-btn.active{background:var(--color-primary);color:#fff;}
.os-type-filter .filter-btn:focus{outline:2px solid var(--color-primary);outline-offset:-2px;}
.os-type-choices{display:flex;gap:16px;flex-wrap:wrap;justify-content:center;}
.os-type{padding:16px 24px;border:0;border-radius:var(--radius-md);color:#fff;cursor:pointer;flex:1 1 120px;text-align:center;font-size:1rem;max-width:200px;}
.os-type-reloj{background:var(--os-reloj-color);}
.os-type-joia{background:var(--os-joia-color);}
.os-type-optica{background:var(--os-optica-color);}
.os-empty{text-align:center;padding:2rem;}
.os-code{font-weight:700;margin-bottom:8px;}
/* OSCompletedTable */
.os-completed{margin-top:1rem;overflow:auto;}
.os-completed-controls{display:flex;gap:8px;flex-wrap:wrap;margin-bottom:0.5rem;}
.os-completed-controls input, .os-completed-controls select{height:var(--control-height);}
.os-completed table{width:100%;border-collapse:collapse;}
.os-completed th{font-size:1rem;text-align:left;border-bottom:1px solid var(--color-border);padding:0.125rem 0.25rem;position:sticky;top:0;background:var(--balloon-bg);z-index:1;}
.os-completed td{padding:0.125rem 0.25rem;border-bottom:1px solid var(--color-border);}
.os-completed td.actions{display:flex;gap:4px;}
.os-completed .os-details{display:none;}
.os-completed .os-details.show{display:table-row;}
.os-completed tbody tr:not(.os-details){height:40px;}
.os-completed .os-details td{padding:0.5rem;background:var(--surface);}
.os-detail-grid{display:flex;flex-direction:column;gap:4px;}
.os-tooltip{position:absolute;background:var(--balloon-bg);border:1px solid var(--color-border);border-radius:var(--radius-sm);padding:4px 8px;font-size:0.75rem;box-shadow:var(--balloon-shadow);pointer-events:none;z-index:1000;}
.os-completed-pagination{display:flex;justify-content:center;align-items:center;gap:0.5rem;margin-top:0.5rem;}
.toast-stack {
  position: fixed;
  bottom: 1rem;
  right: 1rem;
  display: flex;
  flex-direction: column;
  gap: 0.5rem;
}
.toast {
  background: var(--color-accent);
  color: #fff;
  padding: 0.5rem 1rem;
  border-radius: var(--radius-sm);
}
#app-modal {
  position: fixed;
  inset: 0;
  display: flex;
  align-items: center;
  justify-content: center;
  z-index: 100;
}
#app-modal[hidden] { display: none; }
#app-modal .modal-overlay {
  position: absolute;
  inset: 0;
  background: rgba(0,0,0,0.4);
  backdrop-filter: blur(2px);
}
#app-modal .modal-dialog {
  background: var(--color-bg);
  color: var(--color-text);
  border-radius: var(--radius-lg);
  box-shadow: 0 4px 16px rgba(0,0,0,0.1);
  width:100%;
  max-width:720px;
  max-height: min(86vh, 820px);
  overflow:auto;
  padding:1.25rem;
  display:flex;
  flex-direction:column;
  position:relative;
  z-index:101;
}

.modal{position:fixed; inset:0; display:none; z-index:1000;}
.modal.is-open{display:flex;}
[data-overlay]{position:fixed; inset:0; background:rgba(0,0,0,0.5); z-index:990;}
#tagMenuPortal{z-index:1100;}

/* número da data no canto direito, bem alto */
.cal-day .cal-date{
  position:absolute; top:4px; right:10px;
  font-weight:700;
}

/* interior do card de compra */
.purchase-card .card-body{
  background:#eef4f9;
  border-radius:12px;
  padding:12px;
}
#app-modal .modal-header { margin-bottom:1rem; }

/* ===== Switch compacto usado no menu Etiquetas ===== */
.tag-switch{display:flex;align-items:center;gap:.6rem;}
.tag-switch input[type="checkbox"]{
  -webkit-appearance:none; appearance:none;
  width:34px;height:20px;border-radius:999px;
  background:#d7dee6; position:relative; outline:none; cursor:pointer;
  border:1px solid #c4cbd3; vertical-align:middle;
}
.tag-switch input[type="checkbox"]::after{
  content:""; position:absolute; top:2px; left:2px;
  width:16px;height:16px;border-radius:50%;
  background:#fff; box-shadow:0 1px 1px rgba(0,0,0,.15);
  transition:left .18s ease-in-out;
}
.tag-switch input[type="checkbox"]:checked{ background:#2e7d32; border-color:#2e7d32; }
.tag-switch input[type="checkbox"]:checked::after{ left:16px; }
/* remove dots/acentos nativos em qualquer browser */
.tag-switch input[type="checkbox"]::-ms-check,
.tag-switch input[type="checkbox"]::-webkit-slider-thumb{display:none}

/* Dashboard – tipografia centralizada e destacada */
.card--dash h4{ margin:8px 0 12px 0; font-size:20px; font-weight:800; text-align:center; }
.card--dash .metric{ font-size:44px; font-weight:800; text-align:center; line-height:1; }
#app-modal .modal-header h2 { margin:0; font-size:1.5rem; font-weight:600; }
#app-modal .modal-body { flex:1; overflow:auto; }
#app-modal .modal-footer { display:flex; justify-content:flex-end; gap:0.5rem; margin-top:1rem; }
#app-modal .modal-footer .btn { min-width:80px; }

.card.loading { position: relative; overflow: hidden; }
.card.loading::after {
  content: "";
  position: absolute; top:0; left:-100%; width:100%; height:100%;
  background: linear-gradient(90deg, transparent, rgba(255,255,255,0.3), transparent);
  animation: shimmer 1s infinite;
}
@keyframes shimmer { 100% { transform: translateX(100%); } }

/* ===== Clients page ===== */
.card-header {
  display:flex;
  justify-content:space-between;
  align-items:center;
  gap:0.5rem;
  border-bottom:1px solid var(--color-border);
  padding-bottom:0.5rem;
  margin-bottom:0.5rem;
  overflow:hidden;
  width:100%;
}
.card-header .card-head { margin-bottom:0; }
.list-toolbar { display:flex; gap:8px; align-items:center; width:100%; min-width:0; }
.list-toolbar .control { flex:1; height:40px; display:flex; align-items:center; min-width:0; }
.list-toolbar .btn-icon { flex:none; height:40px; width:40px; box-shadow:none; }
.btn-icon.btn-add { background:var(--color-primary); color:#fff; }
.btn-icon.btn-plus { background:var(--color-primary); color:#fff; }
.search-wrapper { position:relative; width:100%; }
.search-wrapper .icon { position:absolute; left:0.75rem; top:50%; transform:translateY(-50%); color:var(--color-placeholder); display:flex; }
.search-wrapper input { padding-left:2rem; width:100%; height:40px; border-radius:var(--radius-lg); max-width:100%; flex:1; min-width:0; }

.clients-toolbar { display:flex; gap:8px; align-items:center; }
.clients-toolbar .search-wrap { position:static; display:flex; align-items:center; gap:8px; flex:1; min-width:0; max-width:100%; }
.clients-toolbar .search-wrap .icon { position:static; transform:none; }
.clients-toolbar .search-input { flex:1; min-width:0; max-width:100%; height:var(--control-height); line-height:var(--control-height); padding-block:0; padding-inline:0.5rem; }
.clients-toolbar .btn-plus { height:var(--control-height); }
.clients-toolbar .filters-wrap { position:relative; }
.clients-toolbar .btn-dropdown { height:var(--control-height); }
.filters-portal, .clients-toolbar .filters-wrap .menu { position:fixed; z-index:9999; background:var(--color-bg); border:1px solid var(--color-border); border-radius:var(--radius-md); box-shadow:0 2px 4px rgba(0,0,0,0.1); padding:0.5rem; display:flex; flex-direction:column; gap:0.25rem; }
.filters-portal label, .clients-toolbar .filters-wrap .menu label { display:flex; align-items:center; gap:0.5rem; }
.filters-portal .divider, .clients-toolbar .filters-wrap .menu .divider { height:1px; background:var(--color-border); margin:4px 0; }
.filters-portal .clear-filters, .clients-toolbar .filters-wrap .menu .clear-filters { background:none; border:none; padding:0; color:var(--color-primary); cursor:pointer; text-align:left; }
.table-wrapper { flex:1; overflow:auto; }
.table-clients { width:100%; border-collapse:collapse; table-layout:fixed; font-size:0.95rem; }
.table-clients th, .table-clients td { padding:0.5rem; border-bottom:1px solid #E5E5E5; text-align:left; overflow:hidden; text-overflow:ellipsis; white-space:nowrap; }
.table-clients tbody tr { background:#fff; }
.table-clients tbody tr[data-id]{ cursor:pointer; }
.table-clients thead th { position:sticky; top:0; background:#EFEFEF; color:#666; }
.table-clients thead th:first-child { border-top-left-radius:var(--radius-lg); }
.table-clients thead th:last-child { border-top-right-radius:var(--radius-lg); }
.table-clients thead tr { overflow:hidden; }
.table-clients-full th.select-col,
.table-clients-full td.select-col {
  width: 48px;
  text-align: center;
}
.table-clients-full th.contacts-col,
.table-clients-full td.contacts-col {
  width: 140px;
}
.table-clients-full td.contacts-col {
  padding-top: 0.75rem;
  padding-bottom: 0.75rem;
}
.table-clients-full th[data-field="nome"],
.table-clients-full td[data-field="nome"] {
  min-width: 200px;
}
.table-clients-full th[data-field="telefone"],
.table-clients-full td[data-field="telefone"],
.table-clients-full th[data-field="cpf"],
.table-clients-full td[data-field="cpf"] {
  min-width: 140px;
}
.table-clients-full th[data-field="genero"],
.table-clients-full td[data-field="genero"] {
  min-width: 110px;
}
.table-clients-full th[data-field="interesses"],
.table-clients-full td[data-field="interesses"] {
  min-width: 200px;
}
.table-clients th.sortable { cursor:pointer; }
.table-clients th .sort-indicator { margin-left:4px; }
.table-clients tbody tr { cursor:pointer; background:#fff; }
.table-clients tbody tr:nth-child(even) { background:#fff; }
.table-clients tbody tr:hover { background: var(--color-border); }
.table-clients tbody tr.row-selected { background:#e0e0e0; border-top-color:transparent !important; box-shadow:none; }
.table-clients tbody tr.row-selected:focus { box-shadow:none; border-top-color:transparent; }
.table-clients tbody tr.row-selected { border-top:none; }
.table-clients-full .select-toggle,
.table-clients-full .select-cell {
  text-align: center;
}
.table-clients-full .select-toggle input,
.table-clients-full .select-cell input {
  width: 16px;
  height: 16px;
}
.contact-dots {
  display:flex;
  gap:6px;
  justify-content:center;
  align-items:center;
}
.contact-dot {
  width:12px;
  height:12px;
  border-radius:50%;
  background:#757575;
  border:1px solid rgba(0,0,0,0.15);
}
.contact-dot.is-green {
  background: var(--green-500);
  border-color: var(--green-500);
}
.contact-dot.is-orange {
  background: var(--accent-orange);
  border-color: var(--accent-orange);
}
.contact-dot.is-gray {
  background:#9e9e9e;
  border-color:#9e9e9e;
}
.btn-sm { padding:0.25rem 0.5rem; font-size:0.8rem; }
.detalhe-head { display:flex; justify-content:space-between; align-items:center; margin-bottom:1rem; }
.detalhe-actions { display:flex; gap:0.5rem; align-items:center; justify-content:flex-end; }
.detalhe-actions > * { height:2.5rem; }
.detalhe-grid { display:grid; grid-template-columns: repeat(auto-fit, minmax(200px,1fr)); gap:1rem; }
.detalhe-grid .observacoes textarea { width:100%; min-height:80px; }

/* Cliente overview header */
.client-overview .overview-header {
  display: flex;
  align-items: center;
  flex-wrap: wrap;
}

.client-overview .overview-header h2 {
  flex:1;
  margin:0;
  font-size:1.25rem;
  font-weight:700;
}

.client-overview .overview-header .actions {
  margin-left: auto;
  display: flex;
  align-items: center;
  gap: 0.75rem;
}

.client-overview .overview-header .actions { display:flex; gap:8px; }
.client-overview .overview-header .actions .btn-icon { width:30px; height:30px; padding:0; }
.client-overview .dados-pessoais { margin-top:20px; }

@media (min-width: 768px) {
  .client-overview .overview-header {
    flex-wrap: nowrap;
  }
}

.mini-card {
  background: var(--color-bg);
  border: none;
  border-radius: var(--radius-sm);
  padding: 1rem;
  box-shadow: 0 2px 4px rgba(0,0,0,0.05);
  margin-bottom: 1rem;
}
.purchase-pills { display:flex; flex-wrap:wrap; gap:8px; margin-bottom:1rem; }
.pill-date { display:inline-flex; align-items:center; padding:6px 12px; border-radius:var(--radius-md); background:var(--neutral-150); border:none; cursor:pointer; }
.pill-date.active { background:var(--color-primary); color:#fff; }
.tag { display:inline-flex; align-items:center; padding:2px 8px; border-radius:var(--radius-md); background:var(--neutral-150); font-size:0.75rem; margin-right:4px; }
.purchase-detail { background:var(--color-bg); border:1px solid var(--color-border); border-radius:var(--radius-sm); box-shadow:0 2px 4px rgba(0,0,0,0.05); padding:1rem; }
.compra-buttons { display:flex; gap:8px; margin-top:8px; }

@media (max-width:768px) {
  .table-clients thead,
  .table-clients-full thead { display:none; }
  .table-clients, .table-clients tbody, .table-clients tr, .table-clients td,
  .table-clients-full, .table-clients-full tbody, .table-clients-full tr, .table-clients-full td {
    display:block;
    width:100%;
  }
  .table-clients tr,
  .table-clients-full tr {
    border:1px solid var(--color-border);
    border-radius:var(--radius-sm);
    padding:0.5rem;
    margin-bottom:0.5rem;
  }
  .table-clients td,
  .table-clients-full td {
    padding:0.25rem 0;
  }
  .table-clients td:nth-child(1)::before { content:'Nome: '; font-weight:600; }
  .table-clients td:nth-child(2)::before { content:'Telefone: '; font-weight:600; }
  .table-clients td:nth-child(3)::before { content:'Última compra: '; font-weight:600; }
  .table-clients-full td:nth-child(1)::before { content:'Selecionar: '; font-weight:600; }
  .table-clients-full td:nth-child(2)::before { content:'Nome: '; font-weight:600; }
  .table-clients-full td:nth-child(3)::before { content:'Telefone: '; font-weight:600; }
  .table-clients-full td:nth-child(4)::before { content:'CPF: '; font-weight:600; }
  .table-clients-full td:nth-child(5)::before { content:'Gênero: '; font-weight:600; }
  .table-clients-full td:nth-child(6)::before { content:'Interesses: '; font-weight:600; }
  .table-clients-full td:nth-child(7)::before { content:'Última compra: '; font-weight:600; }
  .table-clients-full td:nth-child(8)::before { content:'Valor última compra: '; font-weight:600; }
  .table-clients-full td:nth-child(9)::before { content:'Contatos: '; font-weight:600; }
  .table-clients-full td:nth-child(10)::before { content:'Compras: '; font-weight:600; }
  .table-clients-full td.contacts-col .contact-dots {
    justify-content:flex-start;
  }
}
.btn-outline { background:none; border:1px solid var(--color-primary); color:var(--color-primary); }
.modal-section { margin-bottom:1.25rem; }
.modal-section h3 { margin:0 0 1rem; font-size:1.25rem; }
.modal-section + .modal-section { border-top:1px solid var(--color-border); padding-top:1.25rem; }
.form-grid label { display:flex; flex-direction:column; gap:0.25rem; }
.form-grid textarea { min-height:100px; }
.opcoes { display:flex; gap:1rem; margin-top:1rem; }
.form-grid { display:grid; grid-template-columns:repeat(12,1fr); gap:0.75rem; }
@media (max-width:768px){
  .form-grid > * { grid-column: span 12 !important; }
}
.form-actions { display:flex; justify-content:flex-end; gap:0.75rem; margin-top:1.5rem; }
.card-subtitle { margin-top:0.25rem; font-size:0.875rem; color:var(--text-weak); }
.rx-table-wrapper { overflow-x:auto; padding:0.5rem; }
.rx-table { width:100%; border-collapse: collapse; margin-top:0.5rem; border:1px solid var(--color-border); border-radius: var(--radius-sm); overflow:hidden; table-layout:fixed; }
.rx-table th, .rx-table td { padding:0.25rem 0.5rem; border:1px solid var(--color-border); text-align:center; vertical-align:middle; height:36px; min-width:80px; }
.rx-table thead { background: var(--color-accent); color:#fff; }
.rx-table input { width:100%; box-sizing:border-box; height:36px; font:inherit; }

/* ===== Utilities ===== */
.col-span-1 { grid-column: span 1 !important; }
.col-span-2 { grid-column: span 2 !important; }
.col-span-3 { grid-column: span 3 !important; }
.col-span-4 { grid-column: span 4 !important; }
.col-span-5 { grid-column: span 5 !important; }
.col-span-6 { grid-column: span 6 !important; }
.col-span-7 { grid-column: span 7 !important; }
.col-span-8 { grid-column: span 8 !important; }
.col-span-9 { grid-column: span 9 !important; }
.col-span-10 { grid-column: span 10 !important; }
.col-span-11 { grid-column: span 11 !important; }
.col-span-12 { grid-column: span 12 !important; }
.row-span-1 { grid-row: span 1; }
.row-span-2 { grid-row: span 2; }
.row-span-3 { grid-row: span 3; }
.row-span-4 { grid-row: span 4; }
.row-span-5 { grid-row: span 5; }
.row-span-6 { grid-row: span 6; }

/* Responsive defaults */
.card { grid-column: span 12; }
@media (min-width:768px) { .card { grid-column: span 6; } }
@media (min-width:1200px) { .card { grid-column: span 3; } }

@media (max-width:767px) {
  .card[data-card-id="lista-clientes"],
  .card[data-card-id="detalhe-cliente"] {
    grid-column: span 12 !important;
  }
}
/* ===== Calendar ===== */
.calendario-wrapper { display:flex; flex-direction:column; gap:1.5rem; width:100%; --neutral-100: var(--color-border); --green-600: var(--color-primary); --red-600: #c62828; --red-400: #e57373; --card-shadow: 0 2px 4px rgba(0,0,0,0.1); }
.cal-toolbar {
  display:flex;
  align-items:center;
  gap:1rem;
  padding:16px 20px;
  background:transparent;
  border-radius:20px;
  box-shadow:none;
  flex-wrap:nowrap;
}
.cal-actions {
  display:flex;
  align-items:center;
  gap:0.75rem;
  justify-content:flex-start;
  flex:0 0 auto;
}
.cal-controls {
  display:flex;
  align-items:center;
  gap:0.6rem;
  justify-content:flex-end;
  flex:0 0 auto;
  padding:0;
  border-radius:12px;
  background:transparent;
  box-shadow:none;
  border:none;
  white-space:nowrap;
}
.cal-controls .cal-selects { display:flex; align-items:center; gap:0.5rem; }
.cal-controls select {
  background:#f1f5f9;
  border:1px solid rgba(15,23,42,0.08);
  border-radius:12px;
  font-weight:600;
  color:#1f2937;
  padding:0.35rem 1rem;
  min-width:100px;
  appearance:none;
  -webkit-appearance:none;
  -moz-appearance:none;
  background-image:url("data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24' fill='none' stroke='%2363748b' stroke-width='2' stroke-linecap='round' stroke-linejoin='round'><polyline points='6 9 12 15 18 9'/></svg>");
  background-repeat:no-repeat;
  background-position:right 0.85rem center;
  background-size:12px;
  padding-right:2.25rem;
}
.cal-controls select:focus {
  outline:none;
  box-shadow:0 0 0 3px rgba(59,130,246,0.18);
}
.cal-controls .cal-hoje {
  background:#e2e8f0;
  color:#1f2937;
  font-weight:600;
  border-radius:12px;
  padding:0.35rem 1rem;
}
.cal-controls .cal-hoje:hover { filter:brightness(0.95); }
.cal-controls .segmented {
  display:flex;
  align-items:center;
  background:transparent;
  padding:0;
  border-radius:12px;
  gap:0.35rem;
}
.cal-controls .segmented button {
  padding:0.35rem 1.05rem;
  border-radius:12px;
  font-weight:700;
  border:1px solid #16a34a;
  background:#fff;
  color:#16a34a;
}
.cal-controls .segmented [aria-pressed="true"] {
  background:#16a34a;
  color:#fff;
}
.cal-controls .segmented [aria-pressed="false"] {
  background:#fff;
  color:#16a34a;
}
.cal-nav { display:grid; grid-template-columns:auto 1fr auto; align-items:center; justify-items:center; gap:1rem; flex:1 1 auto; min-width:0; position:relative; }
.cal-nav .cal-prev,
.cal-nav .cal-next { position:relative; transform:none; }
.cal-nav .cal-prev { justify-self:start; }
.cal-nav .cal-next { justify-self:end; }
.cal-nav .cal-mes { justify-self:center; width:100%; }

.client-detail-modal{display:grid;gap:16px;padding:4px;}
.client-detail-modal .mini-card{background:var(--surface);border-radius:var(--radius-lg);box-shadow:var(--card-shadow);padding:16px;display:flex;flex-direction:column;gap:12px;}
.client-detail-modal .client-overview .info-grid{grid-template-columns:repeat(2,minmax(0,1fr));}
.client-detail-modal .client-overview h2{margin:0;font-size:1.35rem;}
.purchase-history-list{display:grid;gap:12px;}
.purchase-history-list .purchase-card{background:#eef4f9;border-radius:12px;padding:12px;display:flex;flex-direction:column;gap:12px;}
.purchase-history-list .purchase-card h4{margin:0;font-size:1.1rem;}
.purchase-history-list .purchase-card .info-grid{grid-template-columns:repeat(2,minmax(0,1fr));gap:8px;}
.purchase-history-list .purchase-card .rx-table-wrapper{overflow-x:auto;}
.purchase-history-list .purchase-card table{width:100%;border-collapse:collapse;}
.purchase-history-list .purchase-card th,
.purchase-history-list .purchase-card td{padding:4px 6px;border:1px solid rgba(0,0,0,0.08);text-align:left;font-size:0.85rem;}
.followup-badges{display:flex;flex-wrap:wrap;gap:6px;margin-top:4px;}
.followup-badge{padding:4px 8px;border-radius:999px;font-size:0.75rem;font-weight:600;letter-spacing:0.01em;}
.followup-badge.is-done{background:var(--card-success-soft);color:var(--green-500);}
.followup-badge.is-pending{background:#fce8d8;color:#b15b00;}
.modal-dialog.modal-cliente-detalhe{max-width:840px;}
.cal-nav button {
  width:44px;
  height:44px;
  border-radius:14px;
  display:grid;
  place-items:center;
  padding:0;
  background:#fff;
  border:1px solid rgba(15,23,42,0.1);
  color:#1f2937;
  font-size:1.5rem;
  box-shadow:0 8px 20px rgba(15,23,42,0.08);
}
.cal-nav button:hover { filter:brightness(0.95); }
.cal-nav .cal-mes {
  text-align:center;
  font-size:1.45rem;
  margin:0;
  flex:0 0 auto;
  white-space:nowrap;
  overflow:hidden;
  text-overflow:ellipsis;
  padding:0 0.5rem;
  letter-spacing:0.24em;
  text-transform:uppercase;
  font-weight:800;
  color:#1f2937;
}
.cal-toolbar button, .cal-toolbar select, .cal-toolbar input { font:inherit; height:auto; }
.cal-toolbar .btn { padding:0.5rem 1.25rem; border-radius:12px; }
.btn-cal-eventos {
  background:#ff8a2a;
  color:#fff;
  font-weight:700;
  border-radius:12px;
  padding:0.55rem 1.5rem;
  border:none;
}
.btn-cal-eventos:hover { filter:none; }
.btn-cal-desfalques { background:#555; color:#fff; }
.btn-cal-desfalques:hover { filter:none; }
.monthTitle {
  text-transform:uppercase;
  font-weight:800;
  letter-spacing:0.24em;
  white-space:nowrap;
  max-width:360px;
  overflow:hidden;
  text-overflow:ellipsis;
  margin:0;
  text-align:center;
  font-size:1.45rem;
  color:#1f2937;
}
.segmented { display:inline-flex; background:var(--neutral-100); border-radius:999px; padding:4px; gap:4px; }
.segmented button { padding:0.35rem 1rem; border-radius:999px; font:inherit; border:none; font-weight:600; }
.segmented button:focus { outline:none; box-shadow:0 0 0 2px var(--color-primary); }
.segmented [aria-pressed="true"] { background:var(--color-primary); color:#fff; }
.segmented [aria-pressed="false"] { background:#fff; color:var(--color-text); }

/* ===== Calendar Menu Bar ===== */
.calendar-menu-bar { background:var(--surface); border-radius:var(--radius-lg); padding:clamp(12px,1.6vw,16px); display:flex; flex-direction:column; gap:clamp(10px,1.4vw,16px); align-items:stretch; margin:0 0 1.5rem; width:100%; max-width:none; box-sizing:border-box; }
.calendar-menu-bar .menu-actions { display:flex; flex-wrap:wrap; gap:var(--space-sm); align-items:center; align-self:flex-start; flex:0 0 auto; }
.calendar-menu-bar .menu-widgets { display:grid; grid-template-columns:repeat(5, minmax(200px,1fr)); gap:clamp(6px,1vw,12px); align-items:stretch; width:100%; box-sizing:border-box; overflow-x:auto; }
.calendar-menu-bar .menu-widgets::-webkit-scrollbar{height:6px;}
.calendar-menu-bar .menu-widgets::-webkit-scrollbar-thumb{background:rgba(0,0,0,0.15);border-radius:999px;}
.calendar-menu-bar .mini-widget {
  --mini-widget-bg: var(--surface);
  --mini-widget-value-bg: #1f232a;
  background:var(--mini-widget-bg);
  border:1px solid var(--color-border);
  border-radius:var(--radius-md);
  padding:clamp(4px,0.6vw,8px);
  display:flex;
  flex-direction:column;
  align-items:center;
  justify-content:center;
  min-height:clamp(32px,4vw,40px);
  box-sizing:border-box;
  overflow:hidden;
  text-align:center;
  gap:clamp(6px,0.9vw,9px);
  width:100%;
}
.calendar-menu-bar .mini-title { font-weight:700; font-size:clamp(0.78rem,1.4vw,0.95rem); margin:0; text-align:center; word-break:break-word; }
.calendar-menu-bar .mini-value { font-weight:700; text-align:center; font-size:clamp(1.05rem,2.8vw,1.6rem); }
.calendar-menu-bar .mini-value,
.calendar-menu-bar .mini-label { flex:0 0 auto; }
.calendar-menu-bar .mini-split,
.calendar-menu-bar .mini-triple {
  display:grid;
  gap:clamp(4px,0.7vw,8px);
  justify-items:center;
  align-items:stretch;
  grid-auto-rows:1fr;
  width:100%;
  box-sizing:border-box;
}
.calendar-menu-bar .mini-split {
  grid-template-columns:repeat(2, minmax(0, 1fr));
  max-width:clamp(180px, 70%, 240px);
  margin:0 auto;
}
.calendar-menu-bar .mini-triple { grid-template-columns:repeat(3, minmax(0, 1fr)); }
.calendar-menu-bar .mini-stat {
  display:flex;
  flex-direction:column;
  align-items:center;
  justify-content:center;
  gap:clamp(1px,0.3vw,3px);
  min-width:0;
  width:100%;
  height:100%;
  text-align:center;
  box-sizing:border-box;
}
.calendar-menu-bar .mini-stat.mini-single{ max-width:220px; }
.calendar-menu-bar .mini-label { font-size:clamp(0.7rem,1.2vw,0.85rem); font-weight:500; margin-top:clamp(2px,0.4vw,4px); display:block; line-height:1.2; }
.calendar-menu-bar .mini-value {
  background:var(--mini-widget-value-bg);
  color:#000;
  display:inline-flex;
  align-items:center;
  justify-content:center;
  padding:clamp(4px,0.5vw,6px) clamp(6px,0.8vw,8px);
  border-radius:10px;
  line-height:1;
  min-width:clamp(28px,2.4vw,36px);
  max-width:100%;
}
.calendar-menu-bar .mini-widget.mini-blue {
  --mini-widget-bg:#e3f2fd;
  --mini-widget-value-bg:#bfd4ec;
}
.calendar-menu-bar .mini-widget.mini-yellow {
  --mini-widget-bg:#fff8e1;
  --mini-widget-value-bg:#e4d2a1;
}
.calendar-menu-bar .mini-widget.mini-compact {
  --mini-widget-bg:#fff8e1;
  --mini-widget-value-bg:#e4d2a1;
  align-items:center;
}
.calendar-menu-bar .mini-widget.mini-actions-only {
  --mini-widget-bg:var(--surface);
  --mini-widget-value-bg:#1f232a;
  justify-content:flex-start;
  min-height:clamp(44px,6vw,56px);
}
.calendar-menu-bar .mini-widget.mini-actions-only .mini-actions-inline { display:flex; flex-direction:column; justify-content:center; gap:clamp(6px,0.9vw,9px); width:100%; box-sizing:border-box; }
.calendar-menu-bar .mini-widget.mini-actions-only .mini-actions-inline button { width:100%; display:flex; align-items:center; justify-content:center; padding:clamp(8px,1vw,12px); }
.calendar-menu-bar .mini-actions-inline { display:flex; align-items:center; justify-content:center; gap:var(--space-sm); width:100%; box-sizing:border-box; }
.calendar-menu-bar .mini-actions-inline button { flex:1 1 auto; min-width:0; border:none; border-radius:var(--radius-md); font-weight:700; text-transform:uppercase; padding:clamp(8px,1.4vw,10px) clamp(12px,2vw,16px); cursor:pointer; letter-spacing:0.04em; box-sizing:border-box; font-size:clamp(0.7rem,1.2vw,0.85rem); }
.calendar-menu-bar .mini-actions-inline button.btn-eventos { background:var(--accent-orange); color:#fff; }
.calendar-menu-bar .mini-actions-inline button.btn-folgas { background:#424242; color:#fff; }

.calendar-page .card-grid {
  margin:0;
  max-width:none;
  width:100%;
  gap:0;
}

.calendar-page .card {
  background:transparent;
  border:none;
  border-radius:0;
  box-shadow:none;
  padding:0;
}

.calendar-page .card .card-body {
  padding:0;
}
@media (max-width:768px){
  .calendar-menu-bar{ align-items:stretch; }
  .calendar-menu-bar .menu-actions{ justify-content:flex-start; }
}
@media (min-width: 992px){
  .calendar-menu-bar{ flex-direction:row; }
  .calendar-menu-bar .menu-actions{ align-self:center; }
  .calendar-menu-bar .menu-widgets{ justify-content:flex-start; }
}
@media (max-width: 900px){
  .calendar-menu-bar .mini-triple{ grid-template-columns:repeat(2, minmax(130px, 1fr)); }
}
@media (max-width: 640px){
  .calendar-menu-bar .mini-widget{ min-width:0; }
  .calendar-menu-bar .mini-widget.mini-compact{ padding:var(--space-sm); }
  .calendar-menu-bar .mini-split{ grid-template-columns:repeat(2, minmax(140px, 1fr)); }
  .calendar-menu-bar .mini-triple{ grid-template-columns:repeat(2, minmax(140px, 1fr)); }
}
@media (max-width: 480px){
  .calendar-menu-bar .mini-split,
  .calendar-menu-bar .mini-triple{ grid-template-columns:1fr; }
}

.chips { display:flex; flex-wrap:wrap; gap:0.5rem; }
.chip { padding:6px 12px; border-radius:var(--radius-lg); border:none; background:var(--neutral-200); color:var(--color-text); cursor:pointer; }
.chip[aria-pressed="true"] { background:var(--color-primary); color:#fff; }
.chip:focus { outline:none; box-shadow:0 0 0 2px var(--color-primary); }
.clients-toolbar .search-input { height:100%; }
.cal-weekdays {
  display:grid;
  grid-template-columns:repeat(7, minmax(0,1fr));
  background:#eff2f7;
  border-radius:16px;
  border:1px solid rgba(15,23,42,0.05);
  padding:0.75rem 0;
  letter-spacing:0.08em;
  text-transform:uppercase;
}
.cal-weekdays div {
  padding:0.25rem 0;
  text-align:center;
  font-weight:700;
  font-size:0.75rem;
  color:#475569;
}
.cal-week-nav { display:none; justify-content:space-between; align-items:center; }
.cal-week-nav button { padding:0.25rem 0.5rem; }
.cal-grid {
  --calendar-cell-min-width: 150px;
  display:grid;
  grid-template-columns:repeat(7, minmax(var(--calendar-cell-min-width), 1fr));
  grid-auto-rows:minmax(150px,auto);
  gap:1rem;
  width:100%;
  overflow-x:auto;
  padding-bottom:0.5rem;
  box-sizing:border-box;
}
.calendar-day {
  background:#fff;
  border:1px solid rgba(15,23,42,0.06);
  border-radius:18px;
  padding:1rem;
  display:flex;
  flex-direction:column;
  align-content:flex-start;
  gap:0.75rem;
  position:relative;
  min-width:0;
  box-sizing:border-box;
  overflow:hidden;
}
.calendar-day.today {
  border-color:#16a34a;
  box-shadow:0 0 0 3px rgba(22,163,74,0.12);
}
.calendar-day.day--outside {
  background:#f8fafc;
  color:#94a3b8;
  border-style:dashed;
}
.calendar-day.day--outside .day-num { color:#94a3b8; }
.day-head {
  position:relative;
  display:flex;
  align-items:center;
  justify-content:space-between;
  gap:0.5rem;
  height:auto;
  flex-wrap:nowrap;
  margin-bottom:0.75rem;
}
.day-head > * { white-space:nowrap; }
.calendar-day .calendar-item { margin-top:0.5rem; }
.day-num {
  position:static;
  font-weight:700;
  font-size:1.2rem;
  color:#1f2937;
}
.today-badge {
  position:static;
  transform:none;
  background:transparent;
  color:inherit;
  font-weight:700;
  letter-spacing:0.1em;
  font-size:0.65rem;
  padding:0;
  display:inline-flex;
  align-items:center;
  justify-content:center;
  text-transform:uppercase;
}
.calendar-day.today .day-head {
  background:transparent;
  color:#166534;
  border-radius:12px;
  padding:0;
  margin:0;
}
.calendar-day.today .day-num {
  color:#166534;
  font-size:1.3rem;
}
.calendar-day.today .today-badge {
  color:#166534;
  background:rgba(22,163,74,0.15);
  padding:0.25rem 0.75rem;
  border-radius:999px;
  font-size:0.7rem;
  letter-spacing:0.12em;
}
.calendar-item {
  display:flex;
  align-items:center;
  gap:0.5rem;
  margin-top:0.5rem;
  min-width:0;
  width:100%;
}
.day-add { position:absolute; top:50%; left:50%; transform:translate(-50%,-50%); width:32px; height:32px; border-radius:50%; background:var(--neutral-200); border:none; display:flex; align-items:center; justify-content:center; cursor:pointer; }
.day-add:focus { outline:none; box-shadow:0 0 0 2px var(--green-500); }
.calendar-chip {
  flex:1 1 auto;
  width:100%;
  padding:0.35rem 0.65rem;
  border-radius:6px;
  background:#eef2ff;
  font-size:0.78rem;
  font-weight:600;
  cursor:pointer;
  max-width:100%;
  overflow:hidden;
  text-overflow:ellipsis;
  white-space:nowrap;
  position:relative;
  display:flex;
  align-items:center;
  color:#1f2937;
  justify-content:flex-start;
  box-sizing:border-box;
}
.calendar-chip .chip-name { flex:1 1 auto; min-width:0; overflow:hidden; text-overflow:ellipsis; white-space:nowrap; }
.calendar-chip .chip-stage { flex:0 0 auto; border-radius:999px; padding:0.1rem 0.5rem; font-size:0.68rem; font-weight:700; letter-spacing:0.04em; text-transform:uppercase; }
.calendar-chip.compra,
.calendar-chip.evento.followup { justify-content:space-between; gap:0.5rem; }
.calendar-chip.compra .chip-stage { background:rgba(255,255,255,0.25); color:#fff; }
.calendar-chip.evento.followup .chip-stage { background:rgba(12,42,74,0.18); color:inherit; }
.calendar-chip.compra { background:var(--color-primary); color:#fff; }
.calendar-chip.evento { background:var(--accent-orange); color:#fff; padding-right:20px; }
.calendar-chip.evento.admin { background:#9c27b0; color:#fff; }
.calendar-chip.evento.followup { background:#bfe0ff; color:#0c2a4a; padding-right:0.65rem; }
.calendar-chip.evento[data-efetuado="false"]::after { content:""; position:absolute; right:0; top:0; width:14px; height:100%; background:var(--red-600); }
.calendar-chip.evento[data-efetuado="true"]::after { display:none; }
.calendar-chip.desfalque { background:#555; color:#fff; }
.cal-ano, .cal-mes-select { min-height:auto; padding:0; border-radius:0; }
.calendar-card { 
  padding:0.75rem 1rem;
  border-radius:8px;
  background:#fff;
  border:1px solid rgba(15,23,42,0.05);
  margin-top:0.5rem;
  cursor:pointer;
  position:relative;
  max-width:100%;
  overflow:hidden;
  white-space:normal;
  width:100%;
  box-sizing:border-box;
  display:flex;
  flex-direction:column;
  align-items:flex-start;
  gap:0.35rem;
}
.calendar-card .stage-tag { margin-left:6px; }
.calendar-card strong,
.calendar-card p {
  overflow:hidden;
  text-overflow:ellipsis;
  white-space:nowrap;
  max-width:100%;
}
.calendar-card p { margin:0; font-size:0.75rem; color:inherit; }
.calendar-card.compra { background:var(--color-primary); color:#fff; }
.calendar-card.evento { background:var(--accent-orange); color:#fff; padding-left:0; padding-right:1.25rem; }
.calendar-card.evento.admin { background:#9c27b0; color:#fff; }
.calendar-card.evento { padding-right:20px; }
.calendar-card.evento[data-efetuado="false"]::after { content:""; position:absolute; right:0; top:0; width:14px; height:100%; background:var(--red-600); }
.calendar-card.evento[data-efetuado="true"]::after { display:none; }
.calendar-card.followup { background:#bfe0ff; color:#0c2a4a; }
.calendar-card.desfalque { background:#555; color:#fff; }
.calendar-card strong { display:block; }
.calendar-card .switch { margin-top:0.5rem; }
.destinos-table { width:100%; border-collapse:collapse; margin-top:0.25rem; }
.destinos-table th, .destinos-table td { padding:0.25rem; text-align:left; }
.destinos-table th { font-weight:600; }
.popover { position:absolute; background:var(--color-bg); border:none; border-radius:var(--radius-lg); box-shadow:0 4px 12px rgba(0,0,0,0.15); padding:0.75rem; z-index:50; min-width:400px; min-height:80px; outline:none; }
.popover h3 { margin-top:0; font-size:1rem; }
.popover-body { display:grid; row-gap:8px; }
.popover-row { display:flex; align-items:center; gap:8px; }
.popover-row .label { width:96px; color:var(--text-weak); font-weight:600; }
.popover-row .value { flex:1; min-width:0; }
.popover-footer { display:flex; justify-content:flex-start; align-items:center; gap:12px; margin-top:8px; }
.popover-footer .switch { align-self:center; }
.popover-actions { position:absolute; top:12px; right:12px; display:flex; gap:8px; }
.popover-event { width:auto; min-width:400px; max-width:560px; }
.popover-event .popover-actions { position:static; }
.popover-event .pop-head { display:flex; justify-content:space-between; align-items:center; margin-bottom:8px; gap:8px; }
.popover-event .pop-date { font-size:0.875rem; color:var(--text-weak); }
.popover-event .pop-title { font-weight:700; font-size:1rem; margin-bottom:8px; }
.popover-event .pop-divider { border-top:1px solid var(--color-border); margin-bottom:8px; }
.popover-event .pop-obs { font-size:0.875rem; word-wrap:break-word; }
.popover-event .pop-footer { display:flex; justify-content:flex-end; margin-top:8px; }
.popover-backdrop { position:fixed; inset:0; background:rgba(0,0,0,0.2); pointer-events:none; z-index:40; }
.btn-icon { width:30px; height:30px; border-radius:var(--radius-md); display:grid; place-items:center; border:none; box-shadow:none; }
.btn-icon.delete { background:var(--red-600); color:#fff; }
.btn-icon.adjust { background:var(--orange-500); color:#fff; }
.btn-icon:hover { filter:brightness(1.05); }
.btn-icon:active { transform:translateY(1px); }
.btn-icon:focus { outline:none; box-shadow:0 0 0 2px var(--green-500); }
.switch { appearance:none; width:40px; height:20px; background:var(--color-border); border-radius:var(--radius-lg); position:relative; cursor:pointer; transition:background .3s; }
.switch:before { content:""; position:absolute; top:2px; left:2px; width:16px; height:16px; background:var(--color-bg); border-radius:50%; transition:transform .3s; box-shadow:0 1px 2px rgba(0,0,0,0.2); }
.switch:checked { background:var(--color-primary); }
.switch:checked:before { transform:translateX(20px); }
@media (max-width:768px){
  .cal-toolbar {
    flex-wrap:wrap;
    justify-content:flex-start;
    gap:0.75rem;
  }
  .cal-actions,
  .cal-nav,
  .cal-controls {
    width:100%;
  }
  .cal-actions .btn-cal-eventos {
    width:100%;
    text-align:center;
  }
  .cal-nav {
    order:-1;
    justify-content:flex-start;
  }
  .cal-controls {
    justify-content:flex-start;
    flex-wrap:wrap;
    gap:0.5rem;
  }
  .cal-controls .cal-selects {
    flex-wrap:wrap;
    gap:0.5rem;
  }
  .cal-controls .segmented {
    flex-wrap:wrap;
  }
}

@media (max-width:1024px){
  .cal-grid {
    grid-auto-rows:minmax(130px,auto);
    gap:0.85rem;
    --calendar-cell-min-width: 140px;
  }
}

@media (max-width:768px){
  .cal-grid {
    --calendar-cell-min-width: 180px;
  }
}

@media (max-width:640px){
  .cal-grid {
    grid-auto-rows:minmax(110px,auto);
    gap:0.75rem;
  }
}
.table-usuarios td.acoes { display:flex; gap:4px; }
.opcoes h4 { margin:0 0 0.5rem 0; font-size:0.875rem; color:var(--text-weak); }
.clients-pagination { display:flex; align-items:center; gap:0.5rem; padding:0.5rem; }
.clients-pagination .page-info { flex:1; text-align:center; }
.clients-pagination .page-size { height:var(--control-height); }
.dash-controls { display:flex; justify-content:flex-end; margin-bottom:0.5rem; }
.dash-grid { display:grid; gap:12px; grid-template-columns:repeat(auto-fill,minmax(200px,1fr)); }
@media (min-width:1280px){ .dash-grid { grid-template-columns:repeat(4,1fr); } }
.card.widget { cursor:move; display:flex; flex-direction:column; justify-content:center; align-items:center; text-align:center; }
.card.widget .card-head { font-weight:700; margin-bottom:0.25rem; }
.card.widget .card-metric { font-size:1.25rem; font-weight:700; }
.card.widget .icon { transform:scale(0.5); }
.card.widget[data-widget="atrasados"]{ background:var(--card-danger-soft); }
.card.widget[data-widget="efetuados"]{ background:var(--card-success-soft); }
.card.widget[data-widget="hoje"]{ background:var(--card-info-soft); }
.card.widget:hover{ filter:brightness(0.97); }
.w1h1 { width:150px; height:150px; }
.w1h2 { width:150px; height:300px; }
.w2h2 { width:300px; height:300px; }

/* ===== New styles ===== */
.dashboard-grid{ /* Ajuste: grade fixa com 4 colunas e rolagem horizontal suave */
  --dash-card-min-width: clamp(200px, 22vw, 260px);
  display:grid;
  grid-template-columns:repeat(4,1fr);
  grid-auto-flow:column;
  grid-auto-columns:minmax(var(--dash-card-min-width),1fr);
  gap:clamp(12px,1.8vw,20px);
  align-items:stretch;
  overflow-x:auto;
  padding:clamp(8px,1vw,12px);
  margin:0 auto;
  width:min(100%, 1200px);
  box-sizing:border-box;
  scroll-behavior:smooth;
  overscroll-behavior-inline:contain;
  scroll-snap-type:x proximity;
}
.dashboard-grid::-webkit-scrollbar{height:6px;}
.dashboard-grid::-webkit-scrollbar-thumb{background:rgba(0,0,0,0.18);border-radius:999px;}
.dash-slot{
  border-radius:12px;
  min-height:clamp(140px,18vw,180px);
  min-width:var(--dash-card-min-width);
  background:transparent;
  position:relative;
  display:flex;
  align-items:stretch;
  box-sizing:border-box;
  scroll-snap-align:start;
}
.dash-slot.dropping{outline:3px solid #2e7dd7; outline-offset:-3px}
.dash-card{border-radius:12px;background:#fff;box-shadow:0 1px 3px rgba(0,0,0,.08);height:100%;width:100%;display:flex;align-items:center;justify-content:center;font-weight:700;overflow:hidden;box-sizing:border-box;position:relative;min-height:100%;}
.dash-card-inner{width:100%;height:100%;padding:clamp(12px,1.4vw,18px);display:flex;flex-direction:column;gap:clamp(6px,1vw,12px);box-sizing:border-box;overflow:hidden;align-items:center;justify-content:center;text-align:center;} /* Ajuste: tipografia compacta */
.dash-card-title{font-weight:800;text-align:center;font-size:clamp(0.75rem,1.6vw,1rem);margin:0;}
.dash-card-value{flex:1;display:flex;align-items:center;justify-content:center;font-weight:800;font-size:clamp(1.2rem,3.2vw,1.9rem);text-align:center;word-break:break-word;line-height:1.05;letter-spacing:-0.01em;white-space:normal;overflow:hidden;}
.dash-card-value .subline{display:block;font-size:clamp(0.75rem,1.3vw,0.95rem);font-weight:600;line-height:1.1;}
.card-compact .dash-card-title{font-size:clamp(0.7rem,1.4vw,0.9rem);}
.card-compact .dash-card-value{font-size:clamp(1rem,2.6vw,1.4rem);gap:4px;flex-direction:column;}
.card-info{background:var(--card-info-soft)}
.card-success{background:var(--card-success-soft)}
.card-danger{background:var(--card-danger-soft)}
.tag-menu{position:fixed;z-index:950;min-width:220px;max-height:60vh;overflow:auto;background:#fff;border:1px solid #dadde2;border-radius:12px;box-shadow:0 10px 30px rgba(0,0,0,.15);padding:8px;display:grid;grid-template-columns:1fr;gap:6px}
.tag-row{display:flex;align-items:center;justify-content:space-between;gap:8px}
.tag-row label{font-weight:600}
.switch{position:relative;width:42px;height:22px;border-radius:11px;background:#dfe6ea;transition:.2s}
.switch.on{background:#2e8b57}
.switch .knob{position:absolute;width:18px;height:18px;top:2px;left:2px;border-radius:50%;background:#fff;transition:.2s}
.switch.on .knob{left:22px}
.calendar{position:relative}
.cal-day.is-out-month{opacity:.55}
.cal-day.is-today{
  border:1px solid #16a34a;
  border-radius:18px;
  box-shadow:0 0 0 3px rgba(22,163,74,0.12);
}
.cal-popover-layer{position:absolute;inset:0;pointer-events:none}
.cal-popover{position:absolute;pointer-events:auto;max-width:min(360px, 90vw);max-height:70vh;overflow:auto;background:#2f2f2f;color:#fff;border-radius:12px;padding:10px;box-shadow:0 10px 30px rgba(0,0,0,.3)}

.bar-chart{display:flex; height:100px; align-items:flex-end; gap:4px;}
.bar-chart .bar-group{flex:1; display:flex; align-items:flex-end; gap:2px;}
.bar-chart .bar{flex:1; background:var(--color-border);} 
.bar-chart .bar.green{background:#4caf50;}
.bar-chart .bar.orange{background:var(--accent-orange);}
.bar-chart-labels{display:flex; justify-content:space-between; font-size:12px; margin-top:4px;}
.bar-chart-labels span{flex:1; text-align:center;}
.year-select{align-self:flex-end; margin-bottom:4px;}
.dash-card .card-close{position:absolute; right:8px; top:8px; background:transparent; border:0; cursor:pointer; font-size:16px; opacity:.6}
.dash-card.card-success{background:var(--card-success-soft);}
.dash-card.card-danger{background:var(--card-danger-soft);}
.dash-card.card-info{background:var(--card-info-soft);}
.dash-card.card-success .dash-card-inner,
.dash-card.card-danger .dash-card-inner,
.dash-card.card-info .dash-card-inner{background:transparent;}

.dash-toolbar{display:flex; align-items:center; justify-content:space-between; margin-bottom:8px}
.dash-heading{font-weight:800; font-size:1.2rem}
.dash-add{border-radius:10px; padding:8px 12px; background:#eee; border:1px solid #d6d6d6}

.dash-add-menu{position:fixed; z-index:10000; background:#fff; border:1px solid #dadde2; border-radius:10px; padding:8px; box-shadow:0 10px 24px rgba(0,0,0,.12)}
.dash-add-menu button{display:block; width:100%; text-align:left; padding:8px 10px; border:0; background:transparent; cursor:pointer; border-radius:8px}
.dash-add-menu button:hover{background:#f5f7fa}

.calendar {
  background:#fff;
  border-radius:24px;
  padding:24px;
  width:100%;
  box-sizing:border-box;
  border:1px solid rgba(15,23,42,0.05);
  box-shadow:0 24px 48px rgba(15,23,42,0.08);
  display:flex;
  flex-direction:column;
  gap:1.5rem;
}
.cal-toolbar, .calendar-toolbar { margin-bottom: 0; }
.cal-weekdays, .calendar-weeknames { margin: 0; }
.cal-grid, .calendar-grid { margin-top: 0; }
.event.followup, .event-color-followup, .calendar-chip.followup, .calendar-card.followup { background:#bfe0ff; color:#0c2a4a; }
.event-color-os, .calendar-chip.event-color-os, .calendar-card.event-color-os { background:#ffeb3b; color:#000; }

/* paletas padrão (usar quando houver widgets de status) */
.card-info{background:var(--card-info-soft)}
.card-success{background:var(--card-success-soft)}
.card-danger{background:var(--card-danger-soft)}
.purchase-card{position:relative}
.purchase-date-badge{position:absolute; right:12px; top:10px; font-weight:800; font-size:1rem}
.profile-admin{background:rgba(46,125,50,0.12)}
.profile-other{background:rgba(255,152,0,0.12)}
#profileBadge{
  border-radius:16px;
  padding:12px;
  font-weight:800;
  text-align:center;
  display:flex;
  flex-direction:column;
  align-items:center;
  justify-content:center;
  gap:6px;
  height:auto;
  width:100%;
  box-sizing:border-box;
  box-shadow: inset 0 0 0 1px rgba(255,255,255,0.06);
}

#profileBadge .profile-pic{
  width:64px;
  height:64px;
  border-radius:14px;
  object-fit:cover;
  object-position:50% 50%;
  box-shadow:0 6px 18px rgba(0,0,0,0.18);
}

#profileBadge.editable .profile-pic{cursor:move;}
#profileBadge.editable{cursor:pointer;}

#profileBadge .profile-name{
  font-weight:800;
  white-space:nowrap; /* Ajuste: impede quebra do nome do usuário */
  overflow:hidden;
  text-overflow:ellipsis;
  max-width:100%;
}

#profileBadge .profile-placeholder{
  width:64px;
  height:64px;
  border-radius:var(--radius-md);
  background:var(--neutral-200);
  display:flex;
  align-items:center;
  justify-content:center;
  font-size:1.5rem;
}

.loja-logo-preview{
  width:80px;
  height:80px;
  border-radius:50%;
  object-fit:cover;
  object-position:center;
}

.loja-logo-field{display:flex;align-items:center;gap:8px;}

.loja-nome{font-weight:600;margin-top:4px;}

#clientSearch{height:38px; border-radius:12px; padding:0 14px}
#tagMenuBtn,#addClientBtn{height:38px}
.cli-field{display:flex;align-items:center;gap:6px;grid-column:1 / span 2}
.cli-label{margin-right:4px}
.phone-ico{
  display:inline-block; width:14px; height:14px; margin-right:6px;
  background:currentColor; color:#2e8b57; -webkit-mask:url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path fill="%23000" d="M6.62 10.79a15.05 15.05 0 006.59 6.59l2.2-2.2c.27-.27.67-.36 1.02-.24 1.12.37 2.33.57 3.57.57.55 0 1 .45 1 1V21c0 .55-.45 1-1 1C10.85 22 2 13.15 2 2c0-.55.45-1 1-1h3.5c.55 0 1 .45 1 1 0 1.24.2 2.45.57 3.57.11.35.03.74-.25 1.02l-2.2 2.2z"/></svg>') center/contain no-repeat;
          mask:url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path fill="%23000" d="M6.62 10.79a15.05 15.05 0 006.59 6.59l2.2-2.2c.27-.27.67-.36 1.02-.24 1.12.37 2.33.57 3.57.57.55 0 1 .45 1 1V21c0 .55-.45 1-1 1C10.85 22 2 13.15 2 2c0-.55.45-1 1-1h3.5c.55 0 1 .45 1 1 0 1.24.2 2.45.57 3.57.11.35.03.74-.25 1.02l-2.2 2.2z"/></svg>') center/contain no-repeat;
}
.cli-phone{font-weight:800}

/* Prescrição de grau compacta para Óptica */
.grau-table{
  width:100%;
  border-collapse:collapse;
  font-size:0.8rem;
}
.grau-table th,
.grau-table td{
  border:1px solid #ccc;
  padding:2px;
  text-align:center;
}
.grau-table th:first-child{
  text-align:left;
}
.grau-table input{
  width:55px;
  padding:2px;
}

@media (max-width:600px){
  .os-kanban{flex-wrap:nowrap;overflow-x:auto;scroll-snap-type:x mandatory;}
  .os-kanban .kanban-col{flex:0 0 80%;scroll-snap-align:start;}
}

@media print {
  .os-card-actions,
  .os-card-actions .os-action {
    display:none!important;
  }
}
.nav-group {
  margin: 0;
  border-radius: 0;
  overflow: visible;
  transition: background 0.2s ease;
}
.nav-group > .nav-item {
  margin: 0 16px;
  border-radius: var(--radius-md);
}
.nav-submenu {
  list-style: none;
  margin: 4px 16px 0;
  padding: 6px 0;
  display: none;
  flex-direction: column;
  background: var(--sidebar-sub-bg);
  border-radius: var(--radius-md);
  box-shadow: inset 0 0 0 1px rgba(0,0,0,0.1);
}
.nav-group.is-expanded .nav-submenu {
  display: flex;
}
.nav-group.is-expanded > .nav-item {
  border-bottom: none;
}
.nav-group.is-highlighted {
  background: transparent;
}
.nav-group.is-highlighted > .nav-item {
  background: #2A2F37;
}
.nav-group.is-highlighted .nav-item,
.nav-group.is-highlighted .nav-subitem {
  color: #fff;
}
.nav-group.is-highlighted .nav-subitem:hover {
  background: rgba(255,255,255,0.05);
}
.nav-group:not(.is-highlighted) .nav-subitem.is-active {
  background: #2A2F37;
}
